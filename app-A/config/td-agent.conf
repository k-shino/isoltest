<source>
  @type tail
  format csv
  keys dstat.timestamp,dstat.cpu.total.usr,dstat.cpu.total.sys,dstat.cpu.total.idl,dstat.cpu.total.wai,dstat.cpu.total.hiq,dstat.cpu.total.siq,dstat.cpu.0.usr,dstat.cpu.0.sys,dstat.cpu.0.idl,dstat.cpu.0.wai,dstat.cpu.0.hiq,dstat.cpu.0.siq,dstat.cpu.1.usr,dstat.cpu.1.sys,dstat.cpu.1.idl,dstat.cpu.1.wai,dstat.cpu.1.hiq,dstat.cpu.1.siq,dstat.cpu.2.usr,dstat.cpu.2.sys,dstat.cpu.2.idl,dstat.cpu.2.wai,dstat.cpu.2.hiq,dstat.cpu.2.siq,dstat.cpu.3.usr,dstat.cpu.3.sys,dstat.cpu.3.idl,dstat.cpu.3.wai,dstat.cpu.3.hiq,dstat.cpu.3.siq,dstat.cpu.4.usr,dstat.cpu.4.sys,dstat.cpu.4.idl,dstat.cpu.4.wai,dstat.cpu.4.hiq,dstat.cpu.4.siq,dstat.cpu.5.usr,dstat.cpu.5.sys,dstat.cpu.5.idl,dstat.cpu.5.wai,dstat.cpu.5.hiq,dstat.cpu.5.siq,dstat.cpu.6.usr,dstat.cpu.6.sys,dstat.cpu.6.idl,dstat.cpu.6.wai,dstat.cpu.6.hiq,dstat.cpu.6.siq,dstat.cpu.7.usr,dstat.cpu.7.sys,dstat.cpu.7.idl,dstat.cpu.7.wai,dstat.cpu.7.hiq,dstat.cpu.7.siq
  tag dstat
  path /dstat.cpu.csv
  pos_file /out.cpu.csv.pos
  refresh_interval 1
</source>

<source>
  @type tail
  format csv
  keys dstat.timestamp,dstat.memory.used,dstat.memory.buff,dstat.memory.cach,dstat.memory.free,dstat.dsk.read,dstat.dsk.writ,dstat.page.in,out,dstat.swap.used,dstat.swap.free,dstat.net.recv,dstat.net.send,dstat.proc.run,dstat.proc.blk,dstat.proc.new,dstat.io.read,dstat.io.writ,dstat.sys.int,dstat.sys.csw
  tag dstat
  path /dstat.base.csv
  pos_file /out.base.csv.pos
  refresh_interval 1
</source>

<source>
  @type tail
  format csv
  keys dstat.timestamp,dstat.async.aio,dstat.fsys.files,dstat.fsys.inodes,dstat.ipc.msg,dstat.ipc.sem,dstat.ipc.shm,dstat.lock.pos,dstat.lock.lck,dstat.lock.rea,dstat.lock.wri,dstat.raw.raw,dstat.sock.tot,dstat.sock.tcp,dstat.sock.udp,dstat.sock.raw,dstat.sock.frq,dstat.tcp.lis,dstat.tcp.act,dstat.tcp.syn,dstat.tcp.tim,dstat.tcp.clo,dstat.udp.lis,dstat.udp.act,dstat.unix.dqm,dstat.unix.str,dstat.unix.lis,dstat.unix.act,dstat.vm.majpf,dstat.vm.minpf,dstat.vm.alloc,dstat.vm.free
  tag dstat
  path /dstat.special.csv
  pos_file /out.special.csv.pos
  refresh_interval 1
</source>

<match dstat.*>
  @type copy
 <store>
   @type elasticsearch
   host TARGETHOST
   port 9200
   index_name fluentd
   type_name fluentd
   flush_interval 1
   logstash_format true
 </store>
  <store>
    @type file
    path /home/log/log.txt
  </store>
</match>
